<div class="maincnt">
  <div class="headercnt">
    <div class="subheadercnt1">
      <mat-icon aria-hidden="false" aria-label="Example home icon" fontIcon=" arrow_back_ios" (click)="back()"
      class="mpointer"></mat-icon>
      <!-- <svg (click)="back()" class="mpointer" height="3.6vh"  width="1.7vw" xmlns="http://www.w3.org/2000/svg"  viewBox="0 96 960 960" ><path d="M561 816 320 575l241-241 43 43-198 198 198 198-43 43Z"/></svg> -->
      <span  class="headertext">Contractors</span>
    </div>

    <div class="secondsubhead2">

      <button mat-raised-button 
       id="newreqbtn" (click)="searchemp($event)">
       <div style="display:flex; justify-content: center; align-items: center; flex-direction: row;">
        <svg  fill="#00ADE5" xmlns="http://www.w3.org/2000/svg" height="3vh"  width="1.67vw" viewBox="0 96 960 960" ><path d="M450 856V606H200v-60h250V296h60v250h250v60H510v250h-60Z"/></svg> 
        <span>New Sticker</span>
    </div>     
      </button>
    </div>

    <!-- <div class="subheadercnt3">
   

        </div> -->
  </div>
  <div class="headercnt2">
    <div class="secondsubhead1">
      <span>Employees</span>
    </div>

    <mat-form-field appearance="outline"  id="searchbar">
     
      <div style="display:flex; justify-content: center; align-items: center; flex-direction: row;">
        <input (keyup)="applyFilter($event)" matInput placeholder="Search by Name or Number">
        <svg  fill="#00ADE5" xmlns="http://www.w3.org/2000/svg" height="4vh" viewBox="0 96 960 960" width="3vw"><path d="M796 935 533 672q-30 26-69.959 40.5T378 727q-108.162 0-183.081-75Q120 577 120 471t75-181q75-75 181.5-75t181 75Q632 365 632 471.15 632 514 618 554q-14 40-42 75l264 262-44 44ZM377 667q81.25 0 138.125-57.5T572 471q0-81-56.875-138.5T377 275q-82.083 0-139.542 57.5Q180 390 180 471t57.458 138.5Q294.917 667 377 667Z"/></svg>
       </div>
    </mat-form-field>

    <div class="secondsubhead3">
      <button mat-button [matMenuTriggerFor]="menu1" >
        <!-- <span>
          <mat-icon  class="menuicon" >sort</mat-icon>
          <span  class="menutxt">Sort</span>
          <mat-icon  class="menuicon">keyboard_arrow_down</mat-icon>
        </span> -->
        <div class="sortbtn">
          <svg  xmlns="http://www.w3.org/2000/svg" height="3vh" viewBox="0 96 960 960" width="1.67vw"><path d="M120 816v-60h240v60H120Zm0-210v-60h480v60H120Zm0-210v-60h720v60H120Z"/></svg>
          <div  class="sorttext">Sort</div>
          <!-- <mat-icon id="dropicon">keyboard_arrow_down</mat-icon> -->
          <svg    xmlns="http://www.w3.org/2000/svg" height="3vh" viewBox="0 96 960 960" width="1.67vw"><path d="M480 712 240 472l43-43 197 197 197-197 43 43-240 240Z"/></svg>
      </div>
      </button>
      <mat-menu #menu1="matMenu">
        <button mat-menu-item (click)="externalIdsort()">Name</button>
        <button mat-menu-item  (click)="externalNumsort()">Badge No</button>
      </mat-menu>
      <button mat-button [matMenuTriggerFor]="menu">
        <!-- <span>
          <mat-icon class="menuicon"> filter_list</mat-icon>
          <span  class="menutxt">Filter</span>
          <mat-icon class="menuicon" >keyboard_arrow_down</mat-icon>
        </span> -->
        <div class="sortbtn">
          <svg xmlns="http://www.w3.org/2000/svg" height="3vh" viewBox="0 96 960 960" width="1.67vw"><path d="M440 896q-17 0-28.5-11.5T400 856V616L161 311q-14-17-4-36t31-19h584q21 0 31 19t-4 36L560 616v240q0 17-11.5 28.5T520 896h-80Zm40-276 240-304H240l240 304Zm0 0Z"/></svg>
          <div  class="sorttext">Filter</div>
          <!-- <mat-icon id="dropicon">keyboard_arrow_down</mat-icon> -->
          <svg    xmlns="http://www.w3.org/2000/svg" height="3vh" viewBox="0 96 960 960" width="1.67vw"><path d="M480 712 240 472l43-43 197 197 197-197 43 43-240 240Z"/></svg>
      </div>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="checkboxfilter('selected')">Selected</button>
        <button mat-menu-item  (click)="checkboxfilter('unselected')">UnSelected</button>
        <button mat-menu-item  (click)="checkboxfilter('all')">All</button>
      </mat-menu>
      <button class="selectionbtn" [disabled]="expandedElement == null"  (click)="renewsel()" mat-raised-button>Renew
        Selected</button>

      <button class="selectionbtn" [disabled]="expandedElement == null" (click)="cancelsel()" mat-raised-button>Cancel
        selected</button>

      <!-- background-color:#00ADE5;  -->
    </div>
  </div>

  <div class="tablecnt">




    <table mat-table [dataSource]="dataSource" matSort (matSortChange)="announceSortChange($event)" multiTemplateDataRows class="mat-elevation-z0" id="parrenttable">
      <ng-container matColumnDef="EmployeeName" >
        <th mat-header-cell *matHeaderCellDef  mat-sort-header sortActionDescription="Sort by name"  id="empname"> Employee Name </th>
        <tr>

          <td mat-cell *matCellDef="let element">
            <div class="mbox9">
              <!-- ['EmployeeName', 'BadgeNumber', 'Sticker']; -->
              &nbsp; &nbsp;
              <img src="../../../assets/sampleimage.jpeg" width="32px" height="32px" id="profileimg">
              &nbsp;
              {{element.EmployeeName}}

            </div>

          </td>


        </tr>
      </ng-container>
      <ng-container matColumnDef="BadgeNumber" >
        <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by number">&nbsp; &nbsp;Badge Number</th>
        <tr>

          <td mat-cell *matCellDef="let element"> {{element.BadgeNumber}} </td>

        </tr>
      </ng-container>
      <ng-container matColumnDef="Sticker" >
        <th mat-header-cell *matHeaderCellDef > Sticker </th>
        <tr>

          <td mat-cell *matCellDef="let element"> {{element.Sticker}} </td>

        </tr>
      </ng-container>
     
      <ng-container matColumnDef="expand">
        <th mat-header-cell *matHeaderCellDef aria-label="row actions">&nbsp;</th>
        <td mat-cell *matCellDef="let element" class="tableflex">
          <span class="tdcolor">View More</span>
          <button mat-icon-button aria-label="expand row"
            (click)="(expandedElement = expandedElement === element ? null : element); $event.stopPropagation()"
            (click)="viewdetails(element,expandedElement)">
            <mat-icon *ngIf="expandedElement !== element" class="tdcolor">keyboard_arrow_down</mat-icon>
            <mat-icon *ngIf="expandedElement === element" class="tdcolor">keyboard_arrow_up</mat-icon>
          </button>
        </td>
      </ng-container>
     
      <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
      <ng-container matColumnDef="expandedDetail">
        <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplayWithExpand.length" >
          <div class="example-element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'" class="scrollabletable" >
            <table  *ngIf="expandedtable"  [dataSource]="dataSource2" mat-table class="mat-elevation-z0" id="childtable">
              <!-- {StickerType:'Contractor Non Restricted',PlateNo:'2345-KSA',Model_Year:'2022',ExipiryDate:'11/02/2023',Status:'Active',Action:'View Details'} -->

              <!--selection Tag -->
              <ng-container matColumnDef="select">
                <th mat-header-cell *matHeaderCellDef >
                  <div class="mbox9">
                    <mat-checkbox (change)="$event ? toggleAllRows() : null"
                      [checked]="selection.hasValue() && isAllSelected()"
                      [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()"
                      aria-placeholder="Request Number">
                    </mat-checkbox>
                    <span >Sticker Type</span>
                  </div>
                </th>
                <td mat-cell *matCellDef="let row">
                  <div class="mbox9">
                    <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                      [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
                    </mat-checkbox>
                    {{row.Stickertype}}
                   

                  </div>
                </td>
              </ng-container>

              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef > Plate Number </th>
                <td mat-cell *matCellDef="let i=index let element"> {{element.Plateno}} </td>
              </ng-container>

              <ng-container matColumnDef="weight">
                <th mat-header-cell *matHeaderCellDef >Model Year</th>
                <td mat-cell *matCellDef="let i=index let element"> {{element.Model_year}} </td>
              </ng-container>

              <ng-container matColumnDef="symbol">
                <th mat-header-cell *matHeaderCellDef > Expiry Date </th>
                <td mat-cell *matCellDef="let i=index let element">
                  <span [style.color]="getColor(element.Status)">
                    {{element.ExpiryDate}}
                  </span>
                  </td>
              </ng-container>

              <ng-container matColumnDef="status1">
                <th mat-header-cell *matHeaderCellDef > Status </th>
                <td mat-cell *matCellDef="let i=index let element" >
                  
                  <span  [style.color]="getColor(element.Status)">{{element.Status}}</span>
                
                </td>
              </ng-container>

              <ng-container matColumnDef="details">
                <th mat-header-cell *matHeaderCellDef > Action </th>
                <td mat-cell *matCellDef="let i=index let element" id="view" class="mpointer"
                  (click)="employeestickerdetails(element)"> View Details </td>
              </ng-container>
              
              <ng-container *matNoDataRow>
                <div class="no-data-row">
                  No data available
                </div>
              </ng-container>
              
              <tr mat-header-row *matHeaderRowDef="displayedColumns" class="sub-table-header"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)"></tr>
            </table>

            <!-- <div class="example-element-diagram">
          <div class="example-element-position"> {{element.EmployeeName}} </div>
          <div class="example-element-symbol"> {{element.BadgeNumber}} </div>
          <div class="example-element-name"> {{element.Sticker}} </div>
          <div class="example-element-weight"> {{element.Action}} </div>
        </div> -->

          </div>
        </td>
      </ng-container>
      <ng-container *matNoDataRow>
        <div class="no-data-row">
          No data available
        </div>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="columnsToDisplayWithExpand"></tr>
      <tr mat-row *matRowDef="let element; columns: columnsToDisplayWithExpand;" class="example-element-row"
        [class.example-expanded-row]="expandedElement === element"
        (click)="expandedElement = expandedElement === element ? null : element"
        (click)="viewdetails(element,expandedElement)">
      </tr>
      <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
    </table>


  </div>
  <div class="flex-center" *ngIf="isLoadMore">
    <button mat-raised-button class="load-more" (click)="loadMore()">Load More</button>
</div>

</div>